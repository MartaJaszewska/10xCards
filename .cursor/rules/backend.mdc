---
description: 
globs: src/db/*.ts,src/middleware/*.ts,src/lib/*.ts
alwaysApply: false
---
### Backend and Database

- Use Supabase for backend services, including authentication and database interactions.
- Follow Supabase guidelines for security and performance.
- Use Zod schemas to validate data exchanged with the backend.
- In Next.js Route Handlers (`app/api/**/route.ts`) or server actions, create Supabase clients close to where they are used instead of relying on global mutable state
- Use `SupabaseClient` type from `src/db/supabase.client.ts` (re-exported), not directly from `@supabase/supabase-js`